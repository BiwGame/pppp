<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Financials - ERP PTT</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<style>
  #addModal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
    z-index: 1000;
    width: 90%;
    max-width: 500px;
  }

  #addModal.active {
    display: block;
  }

  #addModal input,
  #addModal select {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 14px;
  }

  .btn {
    background-color: #0066cc;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s ease-in-out;
  }

  .btn:hover {
    background-color: #004999;
  }
</style>
<body>

  <aside class="sidebar">
    <h2>PTT ERP</h2>
    <nav>
      <a href="index.html">Home</a>
      <a href="procurement.html">Inventory</a>
      <a href="financials.html">Financials</a>
      <a href="report.html">report</a>
      <a class="active" href="Financials.html">Financials</a>
    </nav>
  </aside>

  <div class="main">
    <div class="header">
      <h1> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Financials)</h1>
      <button class="btn" onclick="openAddModal()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
    </div>

    <div class="card-container">
      <div class="card">
        <h3>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
        <div class="value">‡∏ø1,200,000</div>
      </div>
      <div class="card">
        <h3>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h3>
        <div class="value">‡∏ø950,000</div>
      </div>
      <div class="card">
        <h3>‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</h3>
        <div class="value">‡∏ø250,000</div>
      </div>
    </div>

    <div class="table-section">
      <h2>üìÑ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
      <table>
        <thead>
          <tr>
            <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
            <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
          </tr>
        </thead>
        <tbody id="txnTable">
          <!-- Rows injected dynamically -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -->
  <div id="addModal">
    <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h3>
    <input type="date" id="txnDate" required>
    <input type="text" id="txnDesc" placeholder="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" required>
    <select id="txnType">
      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
      <option value="‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</option>
      <option value="‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</option>
    </select>
    <input type="number" id="txnAmount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" required>
    <button class="btn" onclick="saveTxn()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <button class="btn" onclick="closeAddModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>

  <script>
    let txnList = [];

    window.onload = function () {
      const saved = localStorage.getItem("txnList");
      if (saved) {
        txnList = JSON.parse(saved);
        txnList.forEach(renderTxn);
      }
    };

    function openAddModal() {
      document.getElementById("addModal").classList.add("active");
    }

    function closeAddModal() {
      document.getElementById("addModal").classList.remove("active");
    }

    function saveTxn() {
      const date = document.getElementById("txnDate").value;
      const desc = document.getElementById("txnDesc").value;
      const type = document.getElementById("txnType").value;
      const amount = parseFloat(document.getElementById("txnAmount").value);

      if (!date || !desc || !type || isNaN(amount)) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");
        return;
      }

      const txn = { date, desc, type, amount };
      txnList.unshift(txn);
      localStorage.setItem("txnList", JSON.stringify(txnList));
      renderTxn(txn);
      closeAddModal();
    }

    function renderTxn(txn) {
      const tbody = document.getElementById("txnTable");
      const tr = document.createElement("tr");
      const sign = txn.type === "‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö" ? "+" : "-";

      const dateFormat = new Date(txn.date).toLocaleDateString("th-TH", { day: 'numeric', month: 'short', year: 'numeric' });

      tr.innerHTML = `
        <td>${dateFormat}</td>
        <td>${txn.desc}</td>
        <td>${txn.type}</td>
        <td>${sign}‡∏ø${txn.amount.toLocaleString()}</td>
        <td><button class="btn" onclick="this.closest('tr').remove()">‡∏•‡∏ö</button></td>
      `;
      tbody.prepend(tr);
    }
  </script>

</body>
</html>
